function APICall(e,n,o,s,t){var l=!1;if("characters"!=(e=e.toLowerCase())&&"books"!=e&&"houses"!=e?console.warn("You entered an incorrect value."):(console.info("You are querying for: https://www.anapioficeandfire.com/api/"+e+"?page="+n+"&pageSize="+o+s+t),l=!0),1==l)try{var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(a.responseText);null!=e&&ProcessAPIResult(e)}},a.open("GET","https://www.anapioficeandfire.com/api/"+e+"?page="+n+"&pageSize="+o+s+t,!0),a.send()}catch(e){console.warn("An error occured here!")}}function QueryRegion(e){var n=e.id,o=cultures[n];if(o instanceof Array){console.log("Dealing with an array");for(var s=o.length-1;s>=0;s--){APICall("characters",1,50,"&Culture=",o[s])}}else APICall("characters",1,50,"&Culture=",o)}function ProcessAPIResult(e,n,o,s,t){all_characters.push.apply(all_characters,e);var l=n+1;console.info("Page index: "+l),console.info(all_characters),e.length<o?console.info("Added all characters of "+t):APICall("characters",l,o,s,t)}function MeasureScrollBar(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth;console.info(n),document.body.removeChild(e);document.querySelector(".svg__tools").style.bottom=30+n+"px"}function ToggleClass(e,n){e.classList.contains(n)?e.classList.remove(n):e.classList.add(n)}function ResetAllClasses(){all_lands.forEach(function(e){e.classList.remove("land__clicked")}),all_continents.forEach(function(e){e.parentElement.classList.remove("continent__clicked")})}function CheckDependencies(e,n){var o="",s=!1;switch(e){case"mouseover":o="land__hovered";break;case"mouseout":o="land__hovered",s=!0;break;case"click":o="land__clicked"}var t=".part_of_"+n.id;document.querySelectorAll(t).forEach(function(e){1==s?e.classList.remove(o):e.classList.add(o)})}function ScrollToElement(e){var n=document.querySelector("#"+e).getBBox();console.log(n);var o=document.querySelector(".section__left"),s=n.y,t=n.x;o.scrollTop=s,o.scrollLeft=t,console.log("New position:"),console.log("Horizontal: "+o.scrollLeft+" | Vertical: "+o.scrollTop)}function ZoomSVG(e){document.querySelector("#game_of_thrones_world_map_svg").style.height=e+"vh"}all_characters=Array();console.info("Hello there!"),document.addEventListener("DOMContentLoaded",function(e){all_lands=document.querySelectorAll("[class*=land_]"),all_pins=document.querySelectorAll("[class*=pin_]"),all_titles=document.querySelectorAll("[class*=text_]"),all_continents=document.querySelectorAll(".continent"),ResetAllClasses(),all_lands.forEach(function(e){e.addEventListener("mouseover",function(){e.classList.add("land__hovered"),CheckDependencies("mouseover",e)}),e.addEventListener("mouseout",function(){e.classList.remove("land__hovered"),CheckDependencies("mouseout",e)}),e.addEventListener("click",function(){ResetAllClasses(),ToggleClass(e,"land__clicked"),CheckDependencies("click",e),QueryRegion(e)})}),all_continents.forEach(function(e){e.addEventListener("mouseover",function(){e.parentElement.classList.add("continent__hovered")}),e.addEventListener("mouseout",function(){e.parentElement.classList.remove("continent__hovered")}),e.addEventListener("click",function(){ResetAllClasses(),ToggleClass(e.parentElement,"continent__clicked"),QueryAPI(e.parentElement)})}),MeasureScrollBar()});var toggle_pins_checkbox=document.querySelector("#toggle_pins_checkbox"),toggle_pins_label=toggle_pins_checkbox.nextElementSibling,more_information_label=document.querySelectorAll(".svg__tools__label")[1];toggle_pins_checkbox.addEventListener("change",function(){all_pins.forEach(function(e){e.classList.contains("pin_shown")?(e.classList.remove("pin_shown"),more_information_label.innerHTML="Click on a region to get more information.",toggle_pins_label.innerHTML="Show cities"):(e.classList.add("pin_shown"),more_information_label.innerHTML="Click on a region/city to get more information.",toggle_pins_label.innerHTML="Hide cities")})});var zoom_slider=document.querySelector("#zoom_svg_slider");zoom_slider.addEventListener("change",function(){ZoomSVG(zoom_slider.value)});var all_lands,all_continents,all_titles,all_pins,all_characters=Array(),cultures={Braavos:"Braavosi",Westeros:["Westeros","Andal","First Men","Rhoynar"],Valyria:"Valyrian",The_Stormlands:"Stormlands",The_Iron_Islands:"Ironborn",The_North:["Northmen","Northern mountain clans"],The_Vale:["Valemen","Mountain clans"],The_Reach:"Reach",Dorne:"Dornish",Riverlands:"Rivermen",Westernlands:["Westerman","Westerlands"],The_Three_Sisters:"Sistermen",New_Ghis:"Ghiscari",Old_Ghis:"Ghiscari",The_Neck:"Crannogmen",Asshai:"Asshai",Tyrish:"Tyroshi",Myr:"Myrish",Thenn:"Thenn",Vaes_Dothrak:"Dothraki",Norvos:"Norvoshi",Ib_Islands:"Ibbenese",Summer_Islands:"Summer Isles",Meereen:"Meereenese",Astapor:"Astapori",Lys:"Lysene",Qarth:"Qartheen",Lhazosh:"Lhazareen",Pentos:"Pentoshi",Naath:"Naathi",Qohor:"Qohor"};