function APICall(e,n,t,l,a){var s=!1;if("characters"!=(e=e.toLowerCase())&&"books"!=e&&"houses"!=e?console.warn("You entered an incorrect value."):(console.info("\r\nQuery called."),console.info("You are querying for: https://www.anapioficeandfire.com/api/"+e+"?page="+n+"&pageSize="+t+l+a),s=!0),1==s)try{var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(i.responseText);null!=e&&(console.info("\r\nWe got the result, now processing...\r\n"),ProcessAPIResult(e,n,a))}},i.open("GET","https://www.anapioficeandfire.com/api/"+e+"?page="+n+"&pageSize="+t+l+a,!0),i.send()}catch(e){console.warn("An error occured here!")}}function QueryRegion(e){for(all_characters.length=0;card__wrapper.firstChild;)card__wrapper.removeChild(card__wrapper.firstChild);var n=e.id,t=cultures[n];if($QUERY_TYPE="characters",$QUERY_SIZE=50,$QUERY_FILTER="&Culture=",t instanceof Array){times_to_call_api=t.length;for(var l=t.length-1;l>=0;l--){var a=t[l];APICall($QUERY_TYPE,$QUERY_PAGE=1,$QUERY_SIZE,$QUERY_FILTER,$QUERY_PARAMETER=a)}}else times_to_call_api=1,APICall($QUERY_TYPE,$QUERY_PAGE=1,$QUERY_SIZE,$QUERY_FILTER,$QUERY_PARAMETER=t)}function ProcessAPIResult(e,n,t){all_characters.push.apply(all_characters,e),console.info("Added "+e.length+" characters."),e.length<$QUERY_SIZE?(console.info("Added all characters of "+t),console.info("\r\n"),console.info(all_characters),times_to_call_api--):(n+=1,console.info("Proceed to page: "+n),APICall($QUERY_TYPE,n,$QUERY_SIZE,$QUERY_FILTER,t)),0==times_to_call_api&&(console.info("\r\n\r\n ----- We have finished our calls, NOW PROCEED!!! ----- \r\n\r\n"),UpdateCardsWithCharacters(0,8))}function UpdateCardsWithCharacters(e,n){var t=document.querySelector("#load_more");if(!0===document.body.contains(t)&&max_value>all_characters.length&&AddClass(t,"hidden"),min_value=e,max_value=n,page_size=n-e,console.info("Load from: "+min_value+" untill "+max_value),all_characters.length<=9)l=all_characters;else var l=all_characters.slice(min_value,max_value);all_characters.length>9&&!1===document.body.contains(t)&&(article=document.createElement("article"),article.classList.add("card"),article.id="load_more",section=document.createElement("section"),section.classList.add("card__section"),load_more__title=document.createElement("h1"),load_more__title.appendChild(document.createTextNode("Load next page of characters")),section.appendChild(load_more__title),article.appendChild(section),card__wrapper.appendChild(article),document.querySelector("#load_more").addEventListener("click",function(){8==page_size?UpdateCardsWithCharacters(min_value+page_size,max_value+page_size+1):UpdateCardsWithCharacters(min_value+page_size,max_value+page_size)})),l.forEach(function(e){BuildArticle(e)})}function DOMText(e){return docment.createTextNode(e)}function BuildArticle(e){var n=DOMText(e.name),t=e.gender,l=DOMText(e.culture),a=!1;""===e.born&&(e.born="Unknown"),""===e.died&&(e.died="Unknown");var s=DOMText(e.playedBy[e.playedBy.length-1]);""!=e.playedBy[e.playedBy.length-1]&&(a=!0);var i,o=DOMText(e.born),c=DOMText(e.died);switch(t){case"Male":i="fa-mars";break;case"Female":i="fa-venus"}article=document.createElement("article"),article.classList.add("card"),header=document.createElement("header"),header.classList.add("card__header"),header__span=document.createElement("span"),header__span.classList.add("card__name"),header__span__title=document.createElement("h1"),header__span__title.appendChild(n),header__span.appendChild(header__span__title),header.appendChild(header__span),header__gender__icon=document.createElement("i"),header__gender__icon.classList.add("fa"),header__gender__icon.classList.add(i),header__gender__icon.classList.add("fa-pull-right"),header.appendChild(header__gender__icon),article.appendChild(header),section=document.createElement("section"),section.classList.add("card__section"),section__line=document.createElement("span"),section__line.classList.add("card__section__line"),section__line_left=document.createElement("span"),section__line_left.classList.add("pull-left"),section__line_left.appendChild(DOMText("Culture:")),section__line.appendChild(section__line_left),section__line_right=document.createElement("span"),section__line_right.classList.add("pull-right"),section__line_right.appendChild(l),section__line.appendChild(section__line_right),section.appendChild(section__line),section__line=document.createElement("span"),section__line.classList.add("card__section__line"),section__line_left=document.createElement("span"),section__line_left.classList.add("pull-left"),section__line_left.appendChild(DOMText("Born:")),section__line.appendChild(section__line_left),section__line_right=document.createElement("span"),section__line_right.classList.add("pull-right"),section__line_right.appendChild(o),section__line.appendChild(section__line_right),section.appendChild(section__line),section__line=document.createElement("span"),section__line.classList.add("card__section__line"),section__line_left=document.createElement("span"),section__line_left.classList.add("pull-left"),section__line_left.appendChild(DOMText("Died:")),section__line.appendChild(section__line_left),section__line_right=document.createElement("span"),section__line_right.classList.add("pull-right"),section__line_right.appendChild(c),section__line.appendChild(section__line_right),section.appendChild(section__line),!0===a&&(section__line=document.createElement("span"),section__line.classList.add("card__section__line"),section__line_left=document.createElement("span"),section__line_left.classList.add("pull-left"),section__line_left.appendChild(DOMText("Played by:")),section__line.appendChild(section__line_left),section__line_right=document.createElement("span"),section__line_right.classList.add("pull-right"),section__line_right.appendChild(s),section__line.appendChild(section__line_right),section.appendChild(section__line)),article.appendChild(section),card__wrapper.insertBefore(article,document.querySelector("#load_more"))}function MeasureScrollBar(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth;console.info(n),document.body.removeChild(e);document.querySelector(".svg__tools").style.bottom=30+n+"px"}function ToggleClass(e,n,t){t=void 0===t?"":t,e.classList.contains(n)?(RemoveClass(e,n),""!=t&&AddClass(e,t)):(AddClass(e,n),""!=t&&RemoveClass(e,t))}function RemoveClass(e,n){e.classList.remove(n)}function AddClass(e,n){e.classList.add(n)}function ResetAllClasses(){RemoveClassOnMultipleElements(all_lands,"land__clicked"),RemoveClassOnMultipleElements(all_continent_parents,"continent__clicked")}function ToggleClassOnMultipleElements(e,n){e.forEach(function(e){ToggleClass(e,n)})}function RemoveClassOnMultipleElements(e,n){e.forEach(function(e){RemoveClass(e,n)})}function AddClassOnMultipleElements(e,n){e.forEach(function(e){AddClass(e,n)})}function CheckDependencies(e,n){var t=".part_of_"+n.id,l=document.querySelectorAll(t);switch(e){case"mouseover":AddClassOnMultipleElements(l,"land__hovered");break;case"mouseout":RemoveClassOnMultipleElements(l,"land__hovered");break;case"click":ToggleClassOnMultipleElements(l,"land__clicked")}}function ScrollToElement(e){var n=document.querySelector("#"+e).getBBox();console.log(n);var t=document.querySelector(".section__left"),l=n.y,a=n.x;t.scrollTop=l,t.scrollLeft=a,console.log("New position:"),console.log("Horizontal: "+t.scrollLeft+" | Vertical: "+t.scrollTop)}function ZoomSVG(e){document.querySelector("#game_of_thrones_world_map_svg").style.height=e+"vh"}var $QUERY_TYPE,$QUERY_PAGE,$QUERY_SIZE,$QUERY_FILTER,$QUERY_PARAMETER,times_to_call_api,all_characters=Array(),card__wrapper=document.querySelector(".card__wrapper"),min_value=0,max_value=0;console.info("Hello there!"),document.addEventListener("DOMContentLoaded",function(e){all_lands=document.querySelectorAll("[class*=land_]"),all_pins=document.querySelectorAll("[class*=pin_]"),all_titles=document.querySelectorAll("[class*=text_]"),all_continents=document.querySelectorAll(".continent"),all_continent_parents=document.querySelectorAll(".continent_wrapper"),ResetAllClasses(),all_lands.forEach(function(e){e.addEventListener("mouseover",function(){AddClass(e,"land__hovered"),CheckDependencies("mouseover",e)}),e.addEventListener("mouseout",function(){RemoveClass(e,"land__hovered"),CheckDependencies("mouseout",e)}),e.addEventListener("click",function(){ResetAllClasses(),ToggleClass(e,"land__clicked"),CheckDependencies("click",e),QueryRegion(e)})}),all_continents.forEach(function(e){e.addEventListener("mouseover",function(){AddClass(e.parentElement,"continent__hovered")}),e.addEventListener("mouseout",function(){RemoveClass(e.parentElement,"continent__hovered")}),e.addEventListener("click",function(){ResetAllClasses(),ToggleClass(e.parentElement,"continent__clicked"),QueryRegion(e.parentElement)})}),MeasureScrollBar()});var toggle_pins_checkbox=document.querySelector("#toggle_pins_checkbox"),toggle_pins_label=toggle_pins_checkbox.nextElementSibling,more_information_label=document.querySelectorAll(".svg__tools__label")[1];toggle_pins_checkbox.addEventListener("change",function(){all_pins.forEach(function(e){e.classList.contains("pin_shown")?(e.classList.remove("pin_shown"),more_information_label.innerHTML="Click on a region to get more information.",toggle_pins_label.innerHTML="Show cities"):(e.classList.add("pin_shown"),more_information_label.innerHTML="Click on a region/city to get more information.",toggle_pins_label.innerHTML="Hide cities")})});var zoom_slider=document.querySelector("#zoom_svg_slider");zoom_slider.addEventListener("change",function(){ZoomSVG(zoom_slider.value)});var resizer=document.querySelector("#svg__tools__resize"),svg__tools_box=document.querySelector(".svg__tools");resizer.addEventListener("click",function(){ToggleClass(svg__tools_box,"opened","closed"),ToggleClass(resizer,"fa-window-minimize","fa-window-maximize")});var all_lands,all_continents,all_titles,all_pins,all_characters=Array(),cultures={Braavos:"Braavosi",Westeros:["Westeros","Andal","First Men","Rhoynar"],King_s_Landing:"Westeros",Valyria:"Valyrian",The_Stormlands:"Stormlands",The_Iron_Islands:"Ironborn",The_North:["Northmen","Northern mountain clans"],The_Vale:["Valemen","Mountain clans"],The_Reach:"Reach",Dorne:"Dornish",Riverlands:"Rivermen",Westernlands:["Westerman","Westerlands"],The_Three_Sisters:"Sistermen",New_Ghis:"Ghiscari",Old_Ghis:"Ghiscari",The_Neck:"Crannogmen",Asshai:"Asshai",Tyrish:"Tyroshi",Myr:"Myrish",Thenn:"Thenn",Vaes_Dothrak:"Dothraki",Norvos:"Norvoshi",Ib_Islands:"Ibbenese",Summer_Islands:"Summer Isles",Meereen:"Meereenese",Astapor:"Astapori",Lys:"Lysene",Qarth:"Qartheen",Lhazosh:"Lhazareen",Pentos:"Pentoshi",Naath:"Naathi",Qohor:"Qohor"};